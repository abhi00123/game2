@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
    :root {
        --bajaj-blue: #0066B2;
        --bajaj-orange: #FF8C00;
        --bajaj-orange-dark: #993D00;
        --charcoal: #2D3748;
    }

    /* Prevent mobile browser quirks */
    html {
        -webkit-text-size-adjust: 100%;
        -moz-text-size-adjust: 100%;
        text-size-adjust: 100%;
        overflow: hidden;
        height: 100%;
        height: -webkit-fill-available;
    }

    body {
        @apply bg-slate-900 text-slate-800 overflow-hidden;
        font-family: 'Inter', sans-serif;
        /* Use dynamic viewport height with fallback */
        min-height: 100dvh;
        min-height: 100dvh;
        min-height: -webkit-fill-available;
        /* Prevent pull-to-refresh and overscroll */
        overscroll-behavior: none;
        -webkit-overflow-scrolling: touch;
        /* Safe area padding for notched devices */
        padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
        /* Prevent touch delays */
        touch-action: manipulation;
    }
}

@layer components {

    /* Fixed Resolution Container Support */
    .quiz-container {
        @apply w-full h-full relative overflow-hidden flex items-center justify-center;
        background: linear-gradient(180deg, #142B57 0%, #2E5590 100%);
    }

    .ghibli-card {
        @apply relative w-full h-full flex flex-col overflow-hidden;
        @apply bg-[#0066B2];
    }

    /* PC / Tablet Optimization - Restricted to Desktop View */
    @media (min-width: 1024px) {
        .ghibli-card {
            border: none;
            max-width: 560px;
            height: 95vh;
            max-height: 900px;
            min-height: 600px;
            margin: auto;
            box-shadow: 0 0 50px rgba(0, 0, 0, 0.5);
        }
    }

    @media (min-width: 1280px) {
        .ghibli-card {
            max-width: 600px;
        }
    }


    /* Inner Content Area - Focus on middle scroll if needed */
    .ghibli-content {
        @apply relative z-10 w-full h-full flex flex-col py-4 px-4 sm:px-8 overflow-y-auto overflow-x-hidden custom-scrollbar;
    }

    /* Short Viewport Optimization (iPhone SE, etc.) */
    @media (max-height: 700px) and (max-width: 640px) {
        .ghibli-content {
            padding-top: 0.5rem;
            padding-bottom: 0.5rem;
            gap: 0.25rem;
        }

        /* WelcomeScreen specific short-height fixes */
        .ghibli-content h1 {
            @apply text-xl !important;
        }

        .btn-primary-3d {
            @apply py-2 !important;
        }

        /* Force visual area to shrink */
        .min-h-\[250px\] {
            min-height: 0 !important;
        }

        .my-4 {
            margin-top: 0.5rem !important;
            margin-bottom: 0.5rem !important;
        }

        /* Clipboard and character scaling */
        .max-w-\[240px\] {
            max-width: 210px !important;
        }

        .mb-8 {
            margin-bottom: 1rem !important;
        }

        .char-woman,
        .char-man {
            height: 210px !important;
            bottom: 5px !important;
        }
    }

    /* Target specific character placement for the fluid Ratio */
    .fluid-mobile .char-woman {
        left: -2.5rem !important;
    }

    .fluid-mobile .char-man {
        right: -2.5rem !important;
    }

    /* GoalAssessmentScreen scroll fixes for .fluid-mobile */
    .fluid-mobile .assessment-container {
        @apply py-1 !important;
        @apply pb-1 !important;
        @apply gap-1 !important;
    }

    .fluid-mobile .assessment-container header {
        @apply mb-1 !important;
    }

    .fluid-mobile .assessment-container h2.pt-8 {
        @apply pt-2 !important;
        /* Goal Title top padding */
        @apply text-xl !important;
    }

    .fluid-mobile .goal-video-container {
        @apply w-[280px] !important;
        /* Video container size */
        @apply h-[280px] !important;
        @apply pt-0 !important;
    }

    .fluid-mobile .question-card {
        @apply p-2 !important;
        /* Question card padding */
        @apply mb-1 !important;
        @apply border-2 !important;
    }

    .fluid-mobile .question-card h3 {
        @apply text-base !important;
    }

    .fluid-mobile .assessment-buttons {
        @apply mb-2 !important;
        /* Action buttons bottom margin */
        @apply gap-2 !important;
    }

    .fluid-mobile .assessment-buttons button {
        @apply !py-2 !important;
        @apply !text-base !important;
    }

    /* ScoreResultsScreen scroll fixes for .fluid-mobile */
    .fluid-mobile .results-container {
        @apply py-1 !important;
    }

    .fluid-mobile .results-header {
        @apply mb-1 !important;
    }

    .fluid-mobile .results-title {
        @apply mb-0.5 !important;
        @apply text-sm !important;
    }

    .fluid-mobile .results-subtitle {
        @apply mb-1 !important;
        @apply text-sm !important;
    }

    .fluid-mobile .speedometer-container {
        @apply scale-[0.7] !important;
        /* Scale down speedometer */
        @apply -my-4 !important;
        /* Pull content closer vertically */
    }

    .fluid-mobile .share-trigger-container {
        @apply mt-0 !important;
    }

    .fluid-mobile .contact-box {
        @apply p-2 !important;
        /* Relationship manager box */
        @apply mb-1 !important;
        @apply border-2 !important;
    }

    .fluid-mobile .contact-box p {
        @apply mb-2 !important;
        @apply text-[10px] !important;
    }

    .fluid-mobile .contact-box a {
        @apply mb-1 !important;
    }

    .fluid-mobile .contact-box button {
        @apply !py-2 !important;
        @apply !text-[10px] !important;
    }

    .fluid-mobile .results-divider {
        @apply mb-1 !important;
        @apply py-0 !important;
    }

    .fluid-mobile .restart-container {
        @apply pb-1 !important;
    }

    .fluid-mobile .restart-container button {
        @apply !py-2 !important;
        @apply !px-4 !important;
        @apply !text-xs !important;
    }

    @media (max-height: 600px) {
        .ghibli-content {
            padding-top: 0.5rem;
            padding-bottom: 0.5rem;
            gap: 0.25rem;
        }
    }

    /* 3D Button - Unified Premium Style */
    .btn-primary-3d {
        @apply relative bg-[#FF8C00] hover:bg-[#FF7000] text-white font-black transition-all uppercase tracking-widest;
        @apply py-3 sm:py-4 px-6 text-base sm:text-lg;
    }

    /* 3D Button - White Secondary */
    .btn-secondary-3d {
        @apply relative bg-white hover:bg-slate-50 text-slate-700 font-extrabold transition-all;
        @apply py-3 sm:py-4 px-6 text-base sm:text-lg;
    }

    /* Modern Progress Bar */
    .progress-track {
        @apply w-full h-2.5 bg-black/20 overflow-hidden;
    }

    .progress-fill {
        @apply h-full bg-[#FF8C00];
        box-shadow: 0 0 15px rgba(255, 140, 0, 0.6);
    }

    /* Custom Scrollbar */
    .custom-scrollbar::-webkit-scrollbar {
        width: 6px;
    }

    .custom-scrollbar::-webkit-scrollbar-track {
        background: rgba(255, 255, 255, 0.05);
    }

    .custom-scrollbar::-webkit-scrollbar-thumb {
        background: rgba(255, 255, 255, 0.2);
    }
}

/* Background Utility */
.bg-burst {
    @apply absolute inset-0 z-0 pointer-events-none bg-cover bg-center;
    background-image: url('/assets/images/background_burst.png');
    opacity: 0.6;
    mix-blend-mode: overlay;
}